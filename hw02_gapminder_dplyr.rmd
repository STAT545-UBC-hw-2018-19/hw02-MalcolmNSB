---
title: "Exploring gapminder using dplyr and ggplot2"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

In this document, we will be exploring the `gapminder` dataset using (among other tools) the `dplyr` and `ggplot2` functions. First we load the gapminder dataset and dplyr using the tidyverse package.
```{r}
library(gapminder)
library(tidyverse)
```
##Smell test the data
In this section we determine some basic attributes of `gapminder`.

 * Is it a data.frame, a matrix, a vector, a list?
```{r}
typeof(gapminder)
head(gapminder)
```
 
 
 * What is its class?
```{r}
class(gapminder)
```
 We see that `gapminder` is a data.frame, a tibble (`tbl`), and a tibble dataframe (`tbl_df`).
 
 * How many variables/columns?
```{r}
ncol(gapminder)
```
 
 
 * How many rows/observations?
 
```{r}
nrow(gapminder)
```
 
 * Can you get these facts about “extent” or “size” in more than one way? Can you imagine different functions being useful in different contexts?
 
We can determine both the class and the number of rows & columns (among other information) of `gapminder` by using the `str` function,
```{r}
str(gapminder)
```
 which also displays the class(es) of gapminder and the number of rows & columns.
 
 * What data type is each variable?
   1. Continent and country: `character`
   2. Year and population: `integer`
   3. Life expectancy and GDP per capita: `numerical` (double)
 


 
## Exploring a variable
We shall pick,

Categorical variable: `continent`.
Quantitative variable: `pop`(population).

* What are possible values (or range, whichever is appropriate) of each variable?
```{r}
distinct(select(gapminder, continent))
range(select(gapminder, pop))
```

* What values are typical? What’s the spread? What’s the distribution? Etc., tailored to the variable at hand.
```{r}
gapminder %>% 
  select(pop) %>% 
  summary()
```
## Plots

Let's explore population visually, using log-scale.
```{r}
ggplot(gapminder, aes(pop)) +
  scale_x_log10() +
  geom_histogram(aes(y=..density..), fill = "green") +
  geom_density()
```

Scatter plot of population with life expectancy:
```{r}
ggplot(gapminder, aes(lifeExp,pop))+
  geom_point() +
  scale_y_log10()
```

Here is a violin plot overlayed with a jitter plot for life expectancy across continents:

```{r}
gapminder %>% 
  select(continent, lifeExp) %>% 
  ggplot(aes(continent, lifeExp)) +
  geom_violin() +
  geom_jitter(alpha = 0.2)
  
```

In the following, we create a (log) plot of population across multiple years in Oceania, and Canada.
```{r}
gapminder %>% 
  filter(continent == "Oceania" | country == "Canada") %>% 
  select(country, year,  pop) %>% 
  ggplot(aes(year, pop, shape = country)) +
  scale_y_log10() +
  geom_point()
```

